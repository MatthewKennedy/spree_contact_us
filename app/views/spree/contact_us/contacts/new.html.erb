<%= content_for :head do %>
  <meta name='turbolinks-visit-control' content='reload'>
<% end %>

<%= render partial: 'spree/shared/error_messages', locals: { target: @contact } %>

<div class="container">
  <div class="row my-3">
    <div class="col-12">
      <h1><%= Spree.t('contact_us') %></h1>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col-12 col-md-4">
      <% if current_store.customer_support_email.present? %>
        <div class="my-4">
          <h3><%= Spree.t("email") %></h3>
          <%= mail_to(current_store.customer_support_email, current_store.customer_support_email) %>
        </div>
      <% end %>

      <% if current_store.contact_phone.present? %>
        <div class="my-4">
          <h3><%= Spree.t("phone") %></h3>
          <%= link_to current_store.contact_phone, "tel:#{current_store.contact_phone}" %>
        </div>
      <% end %>

      <% if current_store.address.present? %>
        <div class="my-4">
          <h3><%= Spree.t('address') %></h3>
          <strong><%= current_store.name %></strong><br>
          <%= current_store.address.html_safe %>
        </div>
      <% end %>
    </div>
    <% if current_store.customer_support_email.present? %>
      <div class="col-12 col-md-8 my-4">
        <h3><%= Spree.t('send_a_message') %></h3>
        <%= form_for @contact, url: contact_us_path, html: { novalidate: '' } do |f| %>
          <div class="form-group">
            <% if SpreeContactUs.require_name %>
              <%= f.text_field :name, class: 'form-control', required: true, placeholder: true %>
            <% end %>
          </div>

          <div class="form-group">
            <%= f.email_field :email, class: 'form-control', required: true, placeholder: true %>
          </div>

          <div class="form-group">
            <% if SpreeContactUs.require_subject %>
              <%= f.text_field :subject, class: 'form-control', required: true %>
            <% end %>
          </div>

          <div class="form-group">
            <%= f.text_area :message, class: 'form-control', rows: 4, required: true, placeholder: Spree.t('spree_contact_us.message_placeholder') %>
          </div>

          <div class="text-center text-lg-left mt-lg-1 mb-4">
            <%= f.submit Spree.t(:send), title: Spree.t(:send), class: 'btn btn-secondary col col-md-4' %>
          </div>
          <%= recaptcha_action('contact') %>
        <% end %>
      </div>

        <%= content_for :recaptcha_js do %>
          <%= include_recaptcha_js %>
        <% end %>
      <% end %>
  </div>
</div>
